"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["39963"],{97196:function(e,t,s){s.r(t),s.d(t,{metadata:()=>r,default:()=>l,frontMatter:()=>i,contentTitle:()=>a,toc:()=>h,assets:()=>d});var r=JSON.parse('{"id":"phaser-editor/scene-editor/box2d-physics/box2d-physics-prepare-scene","title":"Preparing a scene for Box2D physics","description":"Box2D is not a native Phaser API, so some additional steps are required to prepare the project and the scenes where we will create the Box2D worlds.","source":"@site/docs/phaser-editor/scene-editor/box2d-physics/box2d-physics-prepare-scene.md","sourceDirName":"phaser-editor/scene-editor/box2d-physics","slug":"/phaser-editor/scene-editor/box2d-physics/box2d-physics-prepare-scene","permalink":"/phaser-editor/scene-editor/box2d-physics/box2d-physics-prepare-scene","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"box2d-physics-prepare-scene","title":"Preparing a scene for Box2D physics"},"sidebar":"PhaserEditorSidebar","previous":{"title":"Box2D Physics","permalink":"/phaser-editor/scene-editor/box2d-physics"},"next":{"title":"Add a Box2D body","permalink":"/phaser-editor/scene-editor/box2d-physics/box2d-physics-add-body"}}'),o=s(74848),n=s(28453);let i={slug:"box2d-physics-prepare-scene",title:"Preparing a scene for Box2D physics"},a,d={},h=[{value:"Preparing the project",id:"preparing-the-project",level:2},{value:"Setting up the scene",id:"setting-up-the-scene",level:2},{value:"The update method",id:"the-update-method",level:3},{value:"The debug draw",id:"the-debug-draw",level:3}];function c(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Box2D is not a native Phaser API, so some additional steps are required to prepare the project and the scenes where we will create the Box2D worlds."}),"\n",(0,o.jsx)(t.h2,{id:"preparing-the-project",children:"Preparing the project"}),"\n",(0,o.jsxs)(t.p,{children:["To use Box2D in a Phaser project, you must first add the Box2D library to the project. To do this, you must get ",(0,o.jsxs)(t.a,{href:"https://github.com/phaserjs/phaser-box2d/tree/main/dist",children:["the ",(0,o.jsx)(t.code,{children:"PhaserBox2D.js"})," file from its repository"]}),", and then copy it to your project."]}),"\n",(0,o.jsxs)(t.p,{children:["It is important that you keep the same name of the ",(0,o.jsx)(t.code,{children:"PhaserBox2D.js"})," file, since Phaser Editor will use it to import the library in all the code that is generated."]}),"\n",(0,o.jsxs)(t.p,{children:["An easy way to get started with Box2D and Phaser Editor is to create a project using the ",(0,o.jsx)(t.strong,{children:"Box2D Starter"})," project template, or the ",(0,o.jsx)(t.strong,{children:"Angry Balls"})," example template, available in the desktop version of Phaser Editor."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Box2D project templates",src:s(7194).A+"",width:"2328",height:"1896"})}),"\n",(0,o.jsx)(t.h2,{id:"setting-up-the-scene",children:"Setting up the scene"}),"\n",(0,o.jsx)(t.p,{children:"To get physical bodies with Box2D, you must first create a world where these bodies will exist. Since Box2D is an API independent of Phaser, you must also run some routines to sync the physical bodies with Phaser visual objects."}),"\n",(0,o.jsxs)(t.p,{children:["All this code is generated by Phaser Editor, you just need to enable the corresponding parameters. In the Inspector view, the ",(0,o.jsx)(t.strong,{children:"Box2D"})," section is displayed:"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Box2D scene parameters",src:s(21543).A+"",width:"658",height:"274"})}),"\n",(0,o.jsxs)(t.p,{children:["By default, the scene does not generate the code to create the world, so the first step is to enable the ",(0,o.jsx)(t.strong,{children:"Generate Box2D World Code"})," parameter."]}),"\n",(0,o.jsx)(t.p,{children:"Once enabled, you will be able to verify the creation of the world in your scene:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"// Box2D world creation\nSetWorldScale(40);\nconst world = CreateWorld({ worldDef: { \n    ...b2DefaultWorldDef()\n}});\nthis.worldId = world.worldId;\n"})}),"\n",(0,o.jsx)(t.p,{children:"As soon as you enable world code generation, a new section appears in the Inspector, where you can configure the world parameters:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"World settings",src:s(33891).A+"",width:"658",height:"818"})}),"\n",(0,o.jsx)(t.h3,{id:"the-update-method",children:"The update method"}),"\n",(0,o.jsxs)(t.p,{children:["The Box2D world must be updated in each frame. To do this, you must enable the ",(0,o.jsx)(t.strong,{children:"Generate Box2D Update World Code"})," parameter. This will generate the code to update the world in the scene's ",(0,o.jsx)(t.code,{children:"update"})," method:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"update(time, delta) {\n\n	WorldStep({ worldId: this.worldId, deltaTime: delta });\n	UpdateWorldSprites(this.worldId);\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["However, you may need to write your own update method, so you can disable this parameter and write the code manually. In that case, the editor generates an ",(0,o.jsx)(t.code,{children:"updateWorld()"})," method that you can call from your custom ",(0,o.jsx)(t.code,{children:"update"})," method."]}),"\n",(0,o.jsx)(t.p,{children:"This is the method generated by the editor:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"updateWord(time, delta) {\n\n	WorldStep({ worldId: this.worldId, deltaTime: delta });\n	UpdateWorldSprites(this.worldId);\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["And this is how you can call it from your custom ",(0,o.jsx)(t.code,{children:"update"})," method:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"update(time, delta) {\n\n    this.updateWorld(time, delta);\n\n    // your custom code here\n}\n"})}),"\n",(0,o.jsx)(t.h3,{id:"the-debug-draw",children:"The debug draw"}),"\n",(0,o.jsx)(t.p,{children:"In a physics game, it is very useful to visualize the physical bodies. You have two parameters related to debug drawing. The first one is to enable the debug draw in the editor, and the second one is to enable the debug draw in the game (generated code)."}),"\n",(0,o.jsxs)(t.p,{children:["So, when you enable ",(0,o.jsx)(t.strong,{children:"Debug Box2D In Editor"}),", the scene will display the physical bodies in the editor:"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Enable box2d editor debug",src:s(12448).A+"",width:"1222",height:"1472"})}),"\n",(0,o.jsxs)(t.p,{children:["If you enable the parameter ",(0,o.jsx)(t.strong,{children:"Generate Box2D Debug Code"}),", the editor will generate the code to draw the physical bodies in the game. In this matter it is important that you copy the ",(0,o.jsx)(t.code,{children:"PhaserDebugDraw.js"})," file in your project, since it contains all the debug drawing routines. You can ",(0,o.jsx)(t.a,{href:"https://github.com/phaserjs/box2d-examples/blob/main/examples/phaser/PhaserDebugDraw.js",children:"get it from its repository"}),"."]})]})}function l(e={}){let{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},12448:function(e,t,s){s.d(t,{A:()=>r});let r=s.p+"assets/images/box2d-enable-editor-debug-20250214-a04ec0f88e9e4f1468f243729c31713e.webp"},7194:function(e,t,s){s.d(t,{A:()=>r});let r=s.p+"assets/images/box2d-project-templates-20250218-bbd89dece57045e1fb80e92b6439954c.webp"},21543:function(e,t,s){s.d(t,{A:()=>r});let r=s.p+"assets/images/box2d-scene-parameters-20250213-aee4aad45a6526b64935d8a0f41badbc.webp"},33891:function(e,t,s){s.d(t,{A:()=>r});let r=s.p+"assets/images/box2d-world-parameters-20250213-bafba9a0aecb36191b87c4c771e547b0.webp"},28453:function(e,t,s){s.d(t,{R:()=>i,x:()=>a});var r=s(96540);let o={},n=r.createContext(o);function i(e){let t=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);