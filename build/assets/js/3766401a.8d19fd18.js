"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["68220"],{45492:function(e,n,s){s.r(n),s.d(n,{metadata:()=>a,default:()=>o,frontMatter:()=>c,contentTitle:()=>i,toc:()=>t,assets:()=>d});var a=JSON.parse('{"id":"phaser/concepts/gameobjects/layer","title":"Layer","description":"A Guide to the Phaser Layer to group \'layers\' of Game Objects","source":"@site/docs/phaser/concepts/gameobjects/layer.md","sourceDirName":"phaser/concepts/gameobjects","slug":"/phaser/concepts/gameobjects/layer","permalink":"/phaser/concepts/gameobjects/layer","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"visibility":"public","slug":"layer","title":"Layer","description":"A Guide to the Phaser Layer to group \'layers\' of Game Objects","seoTitle":"Layer","seoDescription":"A Guide to the Phaser Layer to group \'layers\' of Game Objects"},"sidebar":"PhaserSidebar","previous":{"title":"Image","permalink":"/phaser/concepts/gameobjects/image"},"next":{"title":"Light","permalink":"/phaser/concepts/gameobjects/light"}}'),r=s(74848),l=s(28453);let c={visibility:"public",slug:"layer",title:"Layer",description:"A Guide to the Phaser Layer to group 'layers' of Game Objects",seoTitle:"Layer",seoDescription:"A Guide to the Phaser Layer to group 'layers' of Game Objects"},i,d={},t=[{value:"Add layer",id:"add-layer",level:2},{value:"Custom class",id:"custom-class",level:2},{value:"Add child",id:"add-child",level:2},{value:"Remove child",id:"remove-child",level:2},{value:"Get child",id:"get-child",level:2},{value:"Iterate",id:"iterate",level:3},{value:"Move child",id:"move-child",level:2},{value:"For each child",id:"for-each-child",level:2},{value:"Set property",id:"set-property",level:2},{value:"Events",id:"events",level:2},{value:"Other properties",id:"other-properties",level:2},{value:"Create mask",id:"create-mask",level:2},{value:"Shader effects",id:"shader-effects",level:2},{value:"Author Credits",id:"author-credits",level:2}];function h(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"A Layer is a special type of Game Object that acts as a Display List. You can add any type of Game Object to a Layer, just as you would to a Scene. Layers can be used to visually group together 'layers' of Game Objects:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const spaceman = this.add.sprite(150, 300, 'spaceman');\nconst bunny = this.add.sprite(400, 300, 'bunny');\nconst elephant = this.add.sprite(650, 300, 'elephant');\n\nconst layer = this.add.layer();\n\nlayer.add([ spaceman, bunny, elephant ]);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The 3 sprites in the example above will now be managed by the Layer they were added to. Therefore, if you then set ",(0,r.jsx)(n.code,{children:"layer.setVisible(false)"})," they would all vanish from the display."]}),"\n",(0,r.jsxs)(n.p,{children:["You can also control the depth of the Game Objects within the Layer. For example, calling the ",(0,r.jsx)(n.code,{children:"setDepth"})," method of a child of a Layer will allow you to adjust the depth of that child within the Layer itself, rather than the whole Scene. The Layer, too, can have its depth set as well."]}),"\n",(0,r.jsxs)(n.p,{children:["The Layer class also offers many different methods for manipulating the list, such as the methods ",(0,r.jsx)(n.code,{children:"moveUp"}),", ",(0,r.jsx)(n.code,{children:"moveDown"}),", ",(0,r.jsx)(n.code,{children:"sendToBack"}),", ",(0,r.jsx)(n.code,{children:"bringToTop"})," and so on. These allow you to change the display list position of the Layers children, causing it to adjust the order in which they are rendered. Using ",(0,r.jsx)(n.code,{children:"setDepth"})," on a child allows you to override this."]}),"\n",(0,r.jsx)(n.p,{children:"Layers can have Post FX Pipelines set, which allows you to easily enable a post pipeline across a whole range of children, which, depending on the effect, can often be far more efficient that doing so on a per-child basis."}),"\n",(0,r.jsx)(n.p,{children:"Layers have no position or size within the Scene. This means you cannot enable a Layer for physics or input, or change the position, rotation or scale of a Layer. They also have no scroll factor, texture, tint, origin, crop or bounds."}),"\n",(0,r.jsx)(n.p,{children:"If you need those kind of features then you should use a Container instead. Containers can be added to Layers, but Layers cannot be added to Containers."}),"\n",(0,r.jsx)(n.p,{children:"However, you can set the Alpha, Blend Mode, Depth, Mask and Visible state of a Layer. These settings will impact all children being rendered by the Layer."}),"\n",(0,r.jsx)(n.h2,{id:"add-layer",children:"Add layer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var layer = this.add.layer();\n// var layer = this.add.layer(children);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"children"})," : Array of game objects added to this layer."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"custom-class",children:"Custom class"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"class MyLayer extends Phaser.GameObjects.Layer {\n    constructor(scene, children) {\n        super(scene, children);\n        // ...\n        this.add.existing(this);\n    }\n    // ...\n\n    // preUpdate(time, delta) {}\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"this.add.existing(gameObject)"})," : Adds an existing Game Object to this Scene.\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If the Game Object renders, it will be added to the Display List."}),"\n",(0,r.jsxs)(n.li,{children:["If it has a ",(0,r.jsx)(n.code,{children:"preUpdate"})," method, it will be added to the Update List."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var layer = new MyLayer(scene, children);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"add-child",children:"Add child"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add child"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.add(gameObject);\n// layer.add(gameObjects);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gameObject"})," : A game object, or an array of game objects."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add child at"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.addAt(gameObject, index);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Replace child"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.replace(oldGameObject, newGameObject);\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"remove-child",children:"Remove child"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Remove child"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var removed = layer.remove(gameObject);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Remove child at"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var removed = layer.removeAt(index);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Remove children between indexes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var removed = layer.removeBetween(startIndex, endIndex);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Remove all children"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.removeAll();\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Removed game object won't be added to display list of scene, use"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"gameObject.addToDisplayList();\n"})}),"\n",(0,r.jsx)(n.p,{children:"to add it back to scene's display list."}),"\n",(0,r.jsx)(n.h2,{id:"get-child",children:"Get child"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get child at"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.getAt(index);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get first child by name"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.getByName(name);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get first child by property"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.getFirst(property, value);\n// var gameObject = layer.getFirst(property, value, startIndex, endIndex);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get random child"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.getRandom();\n// var gameObject = layer.getRandom(startIndex, length);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get all children"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObjects = layer.getAll();\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get index of child"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var index = layer.getIndex(gameObject);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get child count"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var count = layer.count(property, value);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get total children count"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var count = layer.length;\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Has child"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var hasChild = layer.exists(gameObject);\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"iterate",children:"Iterate"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get first child (set iterator index to 0)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.first;\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get last child (set iterator index to last)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.last;\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get next child (increase iterator index, until last)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.next;\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get previous child (decrease iterator index, until 0)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var gameObject = layer.previous;\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"move-child",children:"Move child"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Swap"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.swap(gameObject1, gameObject2);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Move to"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.moveTo(gameObject, index);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Bring to top"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.bringToTop(gameObject);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Send to back"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.sendToBack(gameObject);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Move up"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.moveUp(gameObject);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Move down"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.moveDown(gameObject);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Move child1 above child2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.moveAbove(child1, child2);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Move child1 below child2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.moveBelow(child1, child2);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Sort"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.sort(property);\n"})}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.sort('', function(gameObject1, gameObject2) { \n    return 1; // 0, or -1\n});\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Reverse"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.reverse();\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Shuffle"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.shuffle();\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"!!! note Sort by depth\nChildren game objects also sort by depth."}),"\n",(0,r.jsx)(n.h2,{id:"for-each-child",children:"For each child"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.each(function(gameObject) {\n\n}, scope);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"set-property",children:"Set property"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.setAll(property, value);\n// layer.setAll(property, value, startIndex, endIndex);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"On add game object"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.events.on('addedtoscene', function(gameObject, scene) {\n\n})\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"On remove game object"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"layer.events.on('removedfromscene', function(gameObject, scene) {\n\n})\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"layer.events"})," references to ",(0,r.jsx)(n.code,{children:"this.events"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"other-properties",children:"Other properties"}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/phaser/concepts/gameobjects",children:"game object"})]}),"\n",(0,r.jsx)(n.h2,{id:"create-mask",children:"Create mask"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var mask = layer.createBitmapMask();\n"})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/phaser/concepts/display#masks",children:"mask"})]}),"\n",(0,r.jsx)(n.h2,{id:"shader-effects",children:"Shader effects"}),"\n",(0,r.jsxs)(n.p,{children:["Support ",(0,r.jsx)(n.a,{href:"/phaser/concepts/gameobjects/shader",children:"postFX effects"})]}),"\n",(0,r.jsx)(n.p,{children:"!!! note\nNo preFX effect support"}),"\n",(0,r.jsx)(n.h2,{id:"author-credits",children:"Author Credits"}),"\n",(0,r.jsx)(n.p,{children:"Content on this page includes work by:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/rexrainbow",children:"RexRainbow"})}),"\n"]})]})}function o(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:function(e,n,s){s.d(n,{R:()=>c,x:()=>i});var a=s(96540);let r={},l=a.createContext(r);function c(e){let n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);