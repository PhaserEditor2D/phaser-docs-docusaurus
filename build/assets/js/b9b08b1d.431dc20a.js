"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["27996"],{17645:function(e,n,t){t.r(n),t.d(n,{metadata:()=>o,default:()=>l,frontMatter:()=>i,contentTitle:()=>c,toc:()=>p,assets:()=>a});var o=JSON.parse('{"id":"phaser-editor/scene-editor/user-components/user-components-compiler","title":"The User Components compiler","description":"The user components are configured in *.components files and used by the Scene Editor. It is a concept of Phaser Editor, not Phaser. So we use the same Scene Editor philosophy, it compiles our custom configurations into plain, readable, fully Phaser compatible code.","source":"@site/docs/phaser-editor/scene-editor/user-components/user-components-compiler.md","sourceDirName":"phaser-editor/scene-editor/user-components","slug":"/phaser-editor/scene-editor/user-components/user-components-compiler","permalink":"/phaser-editor/scene-editor/user-components/user-components-compiler","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"user-components-compiler","title":"The User Components compiler"},"sidebar":"PhaserEditorSidebar","previous":{"title":"User Components Editor","permalink":"/phaser-editor/scene-editor/user-components/user-components-editor"},"next":{"title":"Implementing behaviors with the Phaser events","permalink":"/phaser-editor/scene-editor/user-components/user-components-start-update-methods"}}'),s=t(74848),r=t(28453);let i={slug:"user-components-compiler",title:"The User Components compiler"},c,a={},p=[{value:"The super class",id:"the-super-class",level:2},{value:"The constructor",id:"the-constructor",level:2},{value:"The component accessor method",id:"the-component-accessor-method",level:2},{value:"The user members of the component",id:"the-user-members-of-the-component",level:2},{value:"Compiler settings",id:"compiler-settings",level:2}];function d(e){let n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["The user components are configured in ",(0,s.jsx)(n.code,{children:"*.components"})," files and used by the Scene Editor. It is a concept of Phaser Editor, not Phaser. So we use the same Scene Editor philosophy, it compiles our custom configurations into plain, readable, fully Phaser compatible code."]}),"\n",(0,s.jsxs)(n.p,{children:["Following, look at how an ",(0,s.jsx)(n.strong,{children:"HorizontalMove"})," component is compiled into JavaScript."]}),"\n",(0,s.jsx)(n.p,{children:"The component information:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-editor-info-20221101.webp",alt:"Component metadata."})}),"\n",(0,s.jsx)(n.p,{children:"The properties of the component:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-props-20221101.webp",alt:"The properties"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Horizontal Velocity"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-prop-1-20221101.webp",alt:"Horizaontal move property."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Min X"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-prop-2-20221101.webp",alt:"Min position X"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Max X"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-prop-3-20221101.webp",alt:"Max position Y."})}),"\n",(0,s.jsx)(n.p,{children:"The generated code:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'// You can write more code here\n\n/* START OF COMPILED CODE */\n\nclass HorizontalMove extends BaseComponent {\n\n    constructor(gameObject) {\n        gameObject["__HorizontalMove"] = this;\n\n        /** @type {Phaser.GameObjects.Image} */\n        this.gameObject = gameObject;\n        /** @type {number} */\n        this.horizVelocity = 0;\n        /** @type {number} */\n        this.minX = 0;\n        /** @type {number} */\n        this.maxX = 3070;\n\n        /* START-USER-CTR-CODE */\n        // Write your code here.\n        /* END-USER-CTR-CODE */\n    }\n\n    /** @returns {HorizontalMove} */\n    static getComponent(gameObject) {\n        return gameObject["__HorizontalMove"];\n    }\n\n    /* START-USER-CODE */\n    // Write your code here.\n    /* END-USER-CODE */\n}\n\n/* END OF COMPILED CODE */\n// You can write more code here\n'})}),"\n",(0,s.jsx)(n.p,{children:"The generated class is very simple, next we explain it part by part:"}),"\n",(0,s.jsx)(n.h2,{id:"the-super-class",children:"The super class"}),"\n",(0,s.jsxs)(n.p,{children:["If a value (in this case ",(0,s.jsx)(n.code,{children:"BaseComponent"}),") is set to the ",(0,s.jsx)(n.strong,{children:"Super Class"})," parameter. Then the class code is generated like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class HorizontalMove extends BaseComponent {\n    ...\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["A super class allows to create behaviors that are common to certain components, or provide helper methods. It is the case of the ",(0,s.jsx)(n.strong,{children:"UserComponent"})," class, explained in the ",(0,s.jsx)(n.a,{href:"user-components-start-update-methods",children:"Starting and updating the User Components"})," section."]}),"\n",(0,s.jsx)(n.h2,{id:"the-constructor",children:"The constructor"}),"\n",(0,s.jsx)(n.p,{children:"The component has a constructor where all properties are initialized and you can add your initialization code too."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-ctr-code-07292020.webp",alt:"The constructor code."})}),"\n",(0,s.jsx)(n.p,{children:"The constructor is used to create the component and add it to the game object:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const enemy = this.add.image(...);\nconst enemyMove = new HorizontalMove(enemyMove);\nenemyMove.maxX = 400;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"the-component-accessor-method",children:"The component accessor method"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"getComponent()"})," method gets the component from a game object, if exists:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'class HorizontalMove {\n\n    ...\n\n    /** @returns {HorizontalMove} */\n    static getComponent(gameObject) {\n        return gameObject["__HorizontalMove"];\n    }\n}\n\n// in a random part of the game\nconst enemy = ...;\nconst horizMove = HorizontalMove.getComponent(enemy);\nhorizMove.minX = 10;\n'})}),"\n",(0,s.jsx)(n.h2,{id:"the-user-members-of-the-component",children:"The user members of the component"}),"\n",(0,s.jsxs)(n.p,{children:["You can add members to the component class. Just write them inside the ",(0,s.jsx)(n.code,{children:"/* STAR-USER-CODE */"})," and ",(0,s.jsx)(n.code,{children:"/* END-USER-CODE */"})," comments."]}),"\n",(0,s.jsxs)(n.p,{children:["Probably, you would like to write a ",(0,s.jsx)(n.strong,{children:"start"})," and ",(0,s.jsx)(n.strong,{children:"update"})," method, like is explained in the ",(0,s.jsx)(n.a,{href:"user-components-start-update-methods",children:"Starting and updating components"})," section."]}),"\n",(0,s.jsx)(n.h2,{id:"compiler-settings",children:"Compiler settings"}),"\n",(0,s.jsx)(n.p,{children:"The User Components compiler supports two JavaScript and TypeScript as output languages. You can select this language in the Inspector view, when no component is selected. Also, you can select if insert spaces for indentation, the tab size, or the auto export/import of ES modules:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-compiler-settings.webp",alt:"Selecting compiler settings."})}),"\n",(0,s.jsx)(n.p,{children:"The settings have default values, but if there are other scene files or user components files, the default values will be taken from the latest modified file (scene file if not components files are available)."}),"\n",(0,s.jsxs)(n.p,{children:["When the ",(0,s.jsx)(n.strong,{children:"Export Class (ES Module)"})," parameter is on, the compiler includes the ",(0,s.jsx)(n.code,{children:"export default"})," class modifiers."]}),"\n",(0,s.jsxs)(n.p,{children:["When the ",(0,s.jsx)(n.strong,{children:"Auto Import (ES Module)"})," parameter is on, the compiler adds \u201Cimport\u201D statements for importing the types used in different parts of the code generation. Code written by the user is not processed. If you use other types, you should import them manually."]})]})}function l(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:function(e,n,t){t.d(n,{R:()=>i,x:()=>c});var o=t(96540);let s={},r=o.createContext(s);function i(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);