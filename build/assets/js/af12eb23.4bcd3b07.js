"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["95412"],{15595:function(e,t,n){n.r(t),n.d(t,{metadata:()=>r,default:()=>h,frontMatter:()=>a,contentTitle:()=>o,toc:()=>c,assets:()=>p});var r=JSON.parse('{"id":"phaser-editor/scene-editor/prefabs/prefab-user-properties","title":"Prefab user properties","description":"As we mentioned in previous sections, a Prefab extends a Phaser built-in type or another Prefab. This means a Prefab inherits the properties defined in the Phaser built-in types. However, you have the option to define new properties.","source":"@site/docs/phaser-editor/scene-editor/prefabs/prefab-user-properties.md","sourceDirName":"phaser-editor/scene-editor/prefabs","slug":"/phaser-editor/scene-editor/prefabs/prefab-user-properties","permalink":"/phaser-editor/scene-editor/prefabs/prefab-user-properties","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"prefab-user-properties","title":"Prefab user properties"},"sidebar":"PhaserEditorSidebar","previous":{"title":"The prefab object","permalink":"/phaser-editor/scene-editor/prefabs/prefab-object"},"next":{"title":"Creating a prefab instance","permalink":"/phaser-editor/scene-editor/prefabs/prefab-create-instance"}}'),s=n(74848),i=n(28453);let a={slug:"prefab-user-properties",title:"Prefab user properties"},o,p={},c=[{value:"Creating a prefab user property",id:"creating-a-prefab-user-property",level:2},{value:"Simple property type",id:"simple-property-type",level:2},{value:"Option property type",id:"option-property-type",level:2},{value:"Color property type",id:"color-property-type",level:2},{value:"Expression property type",id:"expression-property-type",level:2},{value:"Object Variable property type",id:"object-variable-property-type",level:2},{value:"Game Object Reference property type",id:"game-object-reference-property-type",level:2},{value:"Object Constructor property type",id:"object-constructor-property-type",level:2},{value:"Event property type",id:"event-property-type",level:2},{value:"Dynamic keyboard events",id:"dynamic-keyboard-events",level:3},{value:"Dynamic animation events",id:"dynamic-animation-events",level:3},{value:"Dynamic Spine events",id:"dynamic-spine-events",level:3},{value:"Custom events",id:"custom-events",level:3},{value:"Event code generation",id:"event-code-generation",level:3},{value:"Key Code property type",id:"key-code-property-type",level:2},{value:"Property code generation",id:"property-code-generation",level:2},{value:"Texture Config property type",id:"texture-config-property-type",level:2},{value:"Asset Key property type",id:"asset-key-property-type",level:2},{value:"Animation Key property type",id:"animation-key-property-type",level:2},{value:"Audio Key property type",id:"audio-key-property-type",level:2},{value:"Scene Key property type",id:"scene-key-property-type",level:2},{value:"Spine Skin Name property type",id:"spine-skin-name-property-type",level:2},{value:"Spine Animation Name property type",id:"spine-animation-name-property-type",level:2},{value:"Spine Slot Name property type",id:"spine-slot-name-property-type",level:2},{value:"JSON property type",id:"json-property-type",level:2},{value:"Array properties types",id:"array-properties-types",level:2},{value:"Initializing other properties",id:"initializing-other-properties",level:2},{value:"The <code>scene-awake</code> event",id:"the-scene-awake-event",level:3},{value:"Using properties with custom definition",id:"using-properties-with-custom-definition",level:2},{value:"User properties in a prefab instance",id:"user-properties-in-a-prefab-instance",level:2}];function l(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"As we mentioned in previous sections, a Prefab extends a Phaser built-in type or another Prefab. This means a Prefab inherits the properties defined in the Phaser built-in types. However, you have the option to define new properties."}),"\n",(0,s.jsx)(t.p,{children:"With Prefab user properties, you can create more reusable prefabs. You can express gameplay concepts: the \u201Chealth\u201D of a player, the \u201Cvalue\u201D of a coin, the \u201Cspeed\u201D of an enemy, etc."}),"\n",(0,s.jsx)(t.h2,{id:"creating-a-prefab-user-property",children:"Creating a prefab user property"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"Prefab Properties"})," section of the Inspector view shows a button to create a new user property. This section is shown when you select the scene (click on a blank space of the scene), or when you select the ",(0,s.jsx)(t.strong,{children:"Prefab Properties"})," element in the Outline view:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-node-outline-view-20221102.webp",alt:"The Prefabs Properties in the Outline view."})}),"\n",(0,s.jsxs)(t.p,{children:["Click on the ",(0,s.jsx)(t.strong,{children:"Add Property"})," button to create a new property. It opens a dialog with the different type of properties:"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-add-property-dialog-20230626.webp",alt:"Property types dialog."}),(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-add-property-button-20230626.webp",alt:"Add Property button."})]}),"\n",(0,s.jsxs)(t.p,{children:["The properties are shown as children of the ",(0,s.jsx)(t.strong,{children:"Prefab Properties"})," element. Click a property for editing it in the Inspector view:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-as-children-outline-20221102.webp",alt:"Display all properties of a prefab."})}),"\n",(0,s.jsx)(t.p,{children:"All type of properties requires some common parameters that you should provide:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Name"})," of the property. It is used by the compiler to generate a property declaration code. It should be a valid JavaScript identifier."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Label"}),". It is a UI friendly version of the ",(0,s.jsx)(t.strong,{children:"Name"}),". For example, the label for the ",(0,s.jsx)(t.strong,{children:"maxSpeed"})," name could be ",(0,s.jsx)(t.strong,{children:"Maximum Speed"}),". In code, is generated a ",(0,s.jsx)(t.strong,{children:"maxSpeed"})," field, but the UI shows ",(0,s.jsx)(t.strong,{children:"Maximum Speed"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Tooltip"}),". Used in the UI as documentation of the property."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Is Array Type"})," flag. If enabled, the property is an array of the selected type."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Default"})," value."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Custom Definition"})," flag. If enabled, the scene compiler skips the generation of the code with the property declaration. It allows you writing a custom implementation of the property. For example, using a custom getter and setter. Learn more about ",(0,s.jsx)(t.a,{href:"prefab-user-properties#using-properties-with-custom-definition",children:"using properties with custom definition"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Editor Only"})," flag. If enabled, the property is only available in the editor, and it is not compiled in the generated code. It is useful for properties that are only used for editor-only metadata and functionality. For example, to use it in the ",(0,s.jsx)(t.a,{href:"./prefab-display-properties",children:"Object Display Format"})," parameter of a prefab."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Deprecated"})," flag. If enabled, the property is marked as deprecated. Deprecated properties are hidden in the Inspector view unless they are unlocked. Use this flag when you want to phase out a property but keep it for backward compatibility."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Common parameters of a property.",src:n(52546).A+"",width:"682",height:"672"})}),"\n",(0,s.jsx)(t.p,{children:"The menu of the property section shows the following actions:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Change the type of the property."}),"\n",(0,s.jsx)(t.li,{children:"Delete the property."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["To change the order of the properties, go with the context menu\u2019s ",(0,s.jsx)(t.strong,{children:"Edit"})," \u2192 ",(0,s.jsx)(t.strong,{children:"Move"})," commands."]}),"\n",(0,s.jsx)(t.p,{children:"You can undo/redo all these changes."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-menu-20230627.webp",alt:"Property menu."})}),"\n",(0,s.jsx)(t.h2,{id:"simple-property-type",children:"Simple property type"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"Number"}),", ",(0,s.jsx)(t.strong,{children:"String"}),", and ",(0,s.jsx)(t.strong,{children:"Boolean"})," properties are the simplest. The scene compiler generates the properties as class fields. Note that each property is set to the ",(0,s.jsx)(t.strong,{children:"Default"})," value:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(scene, x, y, texture, frame) {\n        super(...);\n\n        ...\n    }\n\n    /** @type {number} */\n    maxSpeed = 100;\n\n    /** @type {"fire"|"smoke"|"laser"} */\n    flameType = "fire";\n\n    /** @type {(obj:Dragon)=>void} */\n    onClickHandler = obj => {};\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"option-property-type",children:"Option property type"}),"\n",(0,s.jsxs)(t.p,{children:["The Option type allows the user to select one of the predefined string values. It is like traditional enum types. In addition to the common parameters, the Option properties have the ",(0,s.jsx)(t.strong,{children:"Options"})," parameter. You should write all the possible values with a valid JSON array syntax:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-options-param-06062020.webp",alt:"The Options parameter of the Option property."})}),"\n",(0,s.jsxs)(t.p,{children:["Note the ",(0,s.jsx)(t.strong,{children:"Default"})," value should be one of the possible values."]}),"\n",(0,s.jsx)(t.p,{children:"The compiled property is like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(...) {\n        super(...);\n        ...\n    }\n\n    /** @type {"fire"|"smoke"|"laser"} */\n    flameType = "fire";\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"color-property-type",children:"Color property type"}),"\n",(0,s.jsx)(t.p,{children:"The color property type accepts string values with the format of colors. It provides a dialog for picking a color and returns it with a hex format (including the alpha component)."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-color-type-20220409.webp",alt:"The color property editor."})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates the code for defining a Color property like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class GoToSceneButton extends Phaser.GameObjects.Image {\n\n    ...\n\n    /** @type {string} */\n    fadeOutColor = "#ffffffff";\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"And generates the code for setting the property in a scene:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'// goToSceneButton (prefab fields)\ngoToSceneButton.fadeOutColor = "#ff00b5ff";\n'})}),"\n",(0,s.jsxs)(t.p,{children:["There are many different ways of representing a color, you can use the ",(0,s.jsx)(t.a,{href:"https://docs.phaser.io/api-documentation/class/display-color",children:"Phaser.Display.Color"})," class for converting to different formats."]}),"\n",(0,s.jsx)(t.h2,{id:"expression-property-type",children:"Expression property type"}),"\n",(0,s.jsx)(t.p,{children:"The Expression type is the way you have to create a property of any type. You can use any type for the values and any JavaScript expression for setting the values. For example, you can use it to create a property to reference an event handler (or callback function):"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-expression-param-06062020.webp",alt:"Expression property declaration."})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates Expression properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(..) {\n        ...\n    }\n\n    /** @type {(obj:Dragon)=>void} */\n    onClickHandler = obj => {};\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"object-variable-property-type",children:"Object Variable property type"}),"\n",(0,s.jsx)(t.p,{children:"This user property type is dedicated for referencing objects in the scene. It provides a dialog for selecting an object in the scene and sets as value of the property, the name of the variable referencig the object:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-object-variable-20220409.webp",alt:"The object reference editor."})}),"\n",(0,s.jsxs)(t.p,{children:["This property type if a subset of the ",(0,s.jsx)(t.a,{href:"./prefab-user-properties#expression-property-type",children:"Expression property type"}),". You can define the type of the property. By default, it is ",(0,s.jsx)(t.code,{children:"Phaser.GameObjects.Game"}),", but you can write any other type."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"class Eagle extends Phaser.GameObjects.Sprite {\n\n  ...\n\n  /** @type {Phaser.GameObjects.GameObject} */\n  attackTarget;\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"The value set to this property is is verbatim-copied to the generated code:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"// eagle (prefab fields)\neagle.attackTarget = player;\n"})}),"\n",(0,s.jsx)(t.h2,{id:"game-object-reference-property-type",children:"Game Object Reference property type"}),"\n",(0,s.jsxs)(t.p,{children:["The Game Object Reference property type is similar to the ",(0,s.jsx)(t.a,{href:"#object-variable-property-type",children:"Object Variable property type"}),", but it allows selecting strictly a game object from the scene, and keeps a real link with the object. With the Object Variable property type, the value is just a string with the name of the variable that references the object. With the Game Object Reference property type, the value is a reference (the ID) to the object itself. So the link is not lost if you change the variable name of the referenced object."]}),"\n",(0,s.jsxs)(t.p,{children:["Another difference is that the Game Object Reference property allows setting a restriction on the objects it can reference. This restriction is based on the ",(0,s.jsx)(t.a,{href:"./prefab-tags",children:"prefab tags"})," or a game object type."]}),"\n",(0,s.jsxs)(t.p,{children:["For example, if you want the property to only reference objects that have the ",(0,s.jsx)(t.code,{children:"enemy"})," tag, you can define the property this way:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"game object reference filters",src:n(49154).A+"",width:"1040",height:"946"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"Filter Tags"}),' parameter allows you to set a comma-separated list of tags. The property will only allow selecting objects that have at least one of the tags defined in this parameter. To select the tags, you can use the "folder" icon next to the parameter. It opens a dialog with the list of tags defined in the project. You can select one or more tags.']}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"Filter Operator"})," parameter allows you to set the operator for filtering the objects. The available operators are ",(0,s.jsx)(t.strong,{children:"Match All"})," and ",(0,s.jsx)(t.strong,{children:"Match Any"}),". The ",(0,s.jsx)(t.strong,{children:"Match All"})," operator means that the object must have all the tags defined in the ",(0,s.jsx)(t.strong,{children:"Filter Tags"})," parameter. The ",(0,s.jsx)(t.strong,{children:"Match Any"})," operator means that the object must have at least one of the tags defined in the ",(0,s.jsx)(t.strong,{children:"Filter Tags"})," parameter."]}),"\n",(0,s.jsxs)(t.p,{children:["In addition to tag-based filtering, you can also filter by game object type. For example, if you want the property to only reference objects of type ",(0,s.jsx)(t.code,{children:"Phaser.GameObjects.Sprite"}),", you can set the Sprite value to the ",(0,s.jsx)(t.strong,{children:"Filter Object Type"})," property. Look next to the property there is a button to select the type:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Set the game object type filter",src:n(95163).A+"",width:"1048",height:"946"})}),"\n",(0,s.jsx)(t.h2,{id:"object-constructor-property-type",children:"Object Constructor property type"}),"\n",(0,s.jsxs)(t.p,{children:["With this property type you can create a user property for holding an object constructor (saying it in another way: a class). It\u2019s like the ",(0,s.jsx)(t.a,{href:"./prefab-user-properties#expression-property-type",children:"Expression property type"}),", but with a dialog for selecting a prefab class or built-in game object class."]}),"\n",(0,s.jsx)(t.p,{children:"Look in the next image, how you can select a prefab or a built-in Phaser type as expression:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-object-ctr-20220427.webp",alt:"Object Constructor property type"})}),"\n",(0,s.jsx)(t.p,{children:"It will generate a property definition like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"bulletCtr!: typeof Cherry & typeof Gem = Cherry;\n"})}),"\n",(0,s.jsxs)(t.p,{children:["This means, that you can use that property for creating a new object, a ",(0,s.jsx)(t.strong,{children:"Cherry"})," or ",(0,s.jsx)(t.strong,{children:"Gem"})," object:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"createBullet(x: number, y: number) {\n\n    const bullet = new this.bulletCtr(this.scene, x, y);\n\n    return bullet;\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"event-property-type",children:"Event property type"}),"\n",(0,s.jsx)(t.p,{children:"This type of property allows selecting an event name from a list of the Phaser events plus custom-defined events. It also allows writing any arbitrary event name."}),"\n",(0,s.jsx)(t.p,{children:"To open the list of available events, click on the search button. It opens a dialog with the Phaser and custom events:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-select-event-name-20230626.webp",alt:"Select an event name."})}),"\n",(0,s.jsx)(t.p,{children:"When you click on an event name, the bottom pane of the dialog shows the documentation."}),"\n",(0,s.jsx)(t.h3,{id:"dynamic-keyboard-events",children:"Dynamic keyboard events"}),"\n",(0,s.jsxs)(t.p,{children:["Phaser provides the special ",(0,s.jsx)(t.code,{children:"Phaser.Input.Keyboard.Events.KEY_DOWN"})," and ",(0,s.jsx)(t.code,{children:"Phaser.Input.Keyboard.Events.KEY_UP"})," events. These events allow listening to the keys defined in the ",(0,s.jsx)(t.code,{children:"KeyCodes"})," class, combining in this way:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"this.input.keyboard.on('keydown-SPACE', listener);\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Where ",(0,s.jsx)(t.code,{children:"SPACE"})," is a constant in the ",(0,s.jsx)(t.code,{children:"KeyCodes"})," class, and ",(0,s.jsx)(t.code,{children:"keydown"})," (or ",(0,s.jsx)(t.code,{children:"keyup"}),") is the name of the event."]}),"\n",(0,s.jsxs)(t.p,{children:["The Event property dialog shows all combinations of ",(0,s.jsx)(t.code,{children:"keydown-"})," and ",(0,s.jsx)(t.code,{children:"keyup-"})," with the ",(0,s.jsx)(t.code,{children:"KeyCodes"})," values."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-keydown-events-20230626.webp",alt:"Keyboard events."})}),"\n",(0,s.jsx)(t.h3,{id:"dynamic-animation-events",children:"Dynamic animation events"}),"\n",(0,s.jsx)(t.p,{children:"From the Phaser documentation:"}),"\n",(0,s.jsx)(t.p,{children:"The Animation Complete Dynamic Key Event."}),"\n",(0,s.jsx)(t.p,{children:"This event is dispatched by a Sprite when an animation playing on it completes playback.\nThis happens when the animation gets to the end of its sequence, factoring in any delays\nor repeats it may have to process."}),"\n",(0,s.jsxs)(t.p,{children:["The difference between this and the ",(0,s.jsx)(t.strong,{children:"ANIMATION_COMPLETE"})," event is that this one has a dynamic event name that contains the name of the animation within it.\nFor example, if you had an animation called explode you could listen for the completion of that specific animation by using:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"sprite.on('animationcomplete-explode', listener)"})}),"\n",(0,s.jsxs)(t.p,{children:["The Event property dialog collects all the animations available in the ",(0,s.jsx)(t.a,{href:"../../animations-editor/intro",children:"animation files"})," of your project and generates the ",(0,s.jsx)(t.code,{children:"animationcomplete-key"})," events:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-dynamic-animation-events-20230626.webp",alt:"Dynamic animation events."})}),"\n",(0,s.jsx)(t.h3,{id:"dynamic-spine-events",children:"Dynamic Spine events"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://esotericsoftware.com",children:"Spine"})," skeletons contain user events that are fired at a certain moment of an animation. The Event property dialog shows all the events defined in all the ",(0,s.jsx)(t.a,{href:"https://esotericsoftware.com",children:"Spine"})," skeleton assets present in the ",(0,s.jsx)(t.a,{href:"../../asset-pack-editor/asset-pack-file",children:"Asset Pack files"}),":"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-spine-events-20230927.webp",alt:"Spine events."})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://esotericsoftware.com/spine-events",children:"Learn more about the Spine events"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"Event"})," property type is a general type that allows selecting different Phaser events, including the Spine events. However, if you want to create a property specifically for selecting Spine events, you can use the ",(0,s.jsx)(t.strong,{children:"Spine Event"})," property type."]}),"\n",(0,s.jsx)(t.h3,{id:"custom-events",children:"Custom events"}),"\n",(0,s.jsxs)(t.p,{children:["In addition to the Phaser events, the dialog shows custom events defined in an ",(0,s.jsx)(t.code,{children:"events.txt"})," file. Since version 3.62.0 of the editor, this file is included in all project templates. However, you can create this file yourself in any folder of your project. The syntax is very simple. In every line, you define an event, and the name and the documentation are separated with a space. Like this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"my-event-name My event name documentation\n\n# the editor ignores all lines starting with #\nother-event My other event.\n"})}),"\n",(0,s.jsx)(t.p,{children:"Then, the Event property dialog will show the custom events at the beginning of the list:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-custom-event-20230626.webp",alt:"Custom events."})}),"\n",(0,s.jsx)(t.h3,{id:"event-code-generation",children:"Event code generation"}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates the Event properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"class Dragon extends Phaser.GameObjects.Sprite {\n\n        constructor(..) {\n                ...\n        }\n\n        jumpEvent = Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN;\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"key-code-property-type",children:"Key Code property type"}),"\n",(0,s.jsxs)(t.p,{children:["This type of property allows selecting one of the key codes available in the ",(0,s.jsx)(t.code,{children:"Phaser.Input.Keyboard.KeyCodes"})," class:"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-keycode-1-20230627.webp",alt:"KeyCode property."}),(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-keycode-2-20230627.webp",alt:"KeyCode dialog."})]}),"\n",(0,s.jsx)(t.p,{children:"You can use properties of this type for binding the behavior of an object or a game action with a certain keyboard key."}),"\n",(0,s.jsx)(t.h2,{id:"property-code-generation",children:"Property code generation"}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates the Key Code properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"class Dragon extends Phaser.GameObjects.Sprite {\n\n        constructor(..) {\n                ...\n        }\n\n        private jumpKey: number = Phaser.Input.Keyboard.KeyCodes.UP;\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"texture-config-property-type",children:"Texture Config property type"}),"\n",(0,s.jsxs)(t.p,{children:["This type of property allows to select a texture between all the textures defined in the an Asset Pack file. When the texture is selected, the property gets as value the configuration of the texture. For example, if the selected texture is an image with key ",(0,s.jsx)(t.strong,{children:"background"}),", the property is set to:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'{ "key": "background" }\n'})}),"\n",(0,s.jsxs)(t.p,{children:["If the selected texture is the frame ",(0,s.jsx)(t.strong,{children:"branch-01"})," of the atlas ",(0,s.jsx)(t.strong,{children:"atlas-props"}),", then the property is set to:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'{ "key": "atlas-props", "frame": "branch-01" }\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-texture-config-param-09102020.webp",alt:"The Texture Config property."})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates Texture Config properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(..) {\n        ...\n    }\n\n    /** @type {{key:string,frame?:string|number}} */\n    myTexture = {"key":"atlas-props","frame":"branch-01"};\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"asset-key-property-type",children:"Asset Key property type"}),"\n",(0,s.jsxs)(t.p,{children:["The Asset Key property type is just like a simple String property type, but it allows to open a dialog with all the ",(0,s.jsx)(t.a,{href:"../../asset-pack-editor/asset-pack-file",children:"Asset Pack file"})," keys defined in the project. Then, when you select a key in the dialog, it will be set as value to the property."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-asset-key-param-09102020.webp",alt:"Select asset key value."})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates Asset Key properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(..) {\n        ...\n    }\n\n    /** @type {string} */\n    myAssetKey = "acorn-3";\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"animation-key-property-type",children:"Animation Key property type"}),"\n",(0,s.jsxs)(t.p,{children:["This type is just like the ",(0,s.jsx)(t.a,{href:"./prefab-user-properties#asset-key-property-type",children:"Asset Key property type"})," but the dialog only shows the animations defined in the project."]}),"\n",(0,s.jsx)(t.p,{children:"Next to the animation key field, there is a button for selecting the animation key and a button for previewing the selected animation:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-animation-key-section-20231027.webp",alt:"Animation Key property definition"})}),"\n",(0,s.jsx)(t.p,{children:"This is the dialog for selecting the animation key:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-animation-key-dialog-20231027.webp",alt:"A dialog for selecting the animation key."})}),"\n",(0,s.jsx)(t.p,{children:"This is the dialog for previewing the selected animation:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-animation-key-preview-dialog-20231027.webp",alt:"Animation key preview."})}),"\n",(0,s.jsx)(t.h2,{id:"audio-key-property-type",children:"Audio Key property type"}),"\n",(0,s.jsxs)(t.p,{children:["This type is like the ",(0,s.jsx)(t.a,{href:"prefab-user-properties#asset-key-property-type",children:"Asset Key property type"})," but the dialog only shows the audio assets:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-audio-key-param-09102020.webp",alt:"Audio Key property type."})}),"\n",(0,s.jsx)(t.h2,{id:"scene-key-property-type",children:"Scene Key property type"}),"\n",(0,s.jsx)(t.p,{children:"This user property type allows any string values but provides a dialog for selecting a scene key. This dialog shows all the scenes of the project and you can pick one. Then, its key is set as a value."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-scene-key-20220409.webp",alt:"The scene key editor."})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates Scene Key properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"class GoToSceneButton extends Phaser.GameObjects.Sprite {\n\n    constructor(..) {\n        ...\n    }\n\n    /** @type {string} */\n    jumpTo;\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"And the code it generates in the scene is like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'// goToSceneButton (prefab fields)\ngoToSceneButton.jumpTo = "Level";\n'})}),"\n",(0,s.jsx)(t.h2,{id:"spine-skin-name-property-type",children:"Spine Skin Name property type"}),"\n",(0,s.jsxs)(t.p,{children:["This user property type allows any string values but provides a dialog for selecting a Spine skeleton skin. This dialog lists the names of all skins defined in all the ",(0,s.jsx)(t.a,{href:"https://esotericsoftware.com",children:"Spine"})," skeleton assets in the ",(0,s.jsx)(t.a,{href:"../../asset-pack-editor/asset-pack-file",children:"Asset Pack files"})," of the project. You can pick one name, then it is set as a value of the property."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/spine-animations-user-property-skin-20230927.webp",alt:"Spine skin dialog."})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates Spine Skin Name properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"class Player extends SpineGameObject {\n\n    constructor(..) {\n        ...\n    }\n\n    theSkin: string;\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"And the code it generates in the scene is like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'player.theSkin = "Wolf02";\n'})}),"\n",(0,s.jsx)(t.h2,{id:"spine-animation-name-property-type",children:"Spine Animation Name property type"}),"\n",(0,s.jsxs)(t.p,{children:["This user property type allows any string values but provides a dialog for selecting an animation name. This dialog lists the names of all animations defined in all the ",(0,s.jsx)(t.a,{href:"https://esotericsoftware.com",children:"Spine"})," skeleton assets in the ",(0,s.jsx)(t.a,{href:"../../asset-pack-editor/asset-pack-file",children:"Asset Pack files"})," of the project. You can pick one name, then it is set as a value of the property."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/spine-animations-user-properties-animation-20230927.webp",alt:"Spine animation name dialog."})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates Spine Animation Name properties like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"class Player extends SpineGameObject {\n\n    constructor(..) {\n        ...\n    }\n\n    startAnimation: string;\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"And the code it generates in the scene is like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'player.startAnimation = "idle";\n'})}),"\n",(0,s.jsx)(t.h2,{id:"spine-slot-name-property-type",children:"Spine Slot Name property type"}),"\n",(0,s.jsxs)(t.p,{children:["This user property type allows any string values but provides a dialog for selecting a Spine skeleton slot name. This dialog lists the names of all slots defined in all the ",(0,s.jsx)(t.a,{href:"https://esotericsoftware.com",children:"Spine"})," skeleton assets in the ",(0,s.jsx)(t.a,{href:"../../asset-pack-editor/asset-pack-file",children:"Asset Pack files"})," of the project. You can pick one name, then it is set as a value of the property."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Slot name user property",src:n(46338).A+"",width:"758",height:"274"})}),"\n",(0,s.jsx)(t.p,{children:"The slot name selection dialog groups the slot names by skeleton asset:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Slot name selection dialog",src:n(16004).A+"",width:"832",height:"1318"})}),"\n",(0,s.jsx)(t.h2,{id:"json-property-type",children:"JSON property type"}),"\n",(0,s.jsxs)(t.p,{children:["The JSON property type allows you to create a user property that can hold JSON data. It provides a text area for entering JSON-formatted text, and it validates the input to ensure it is valid JSON. The validation is based on the standard JSON syntax and the ",(0,s.jsx)(t.strong,{children:"JSON Schema"})," parameter, if provided."]}),"\n",(0,s.jsxs)(t.p,{children:["This is an example of a JSON schema for an object with the ",(0,s.jsx)(t.code,{children:"items"})," property that us an array of tuples with the ",(0,s.jsx)(t.code,{children:"name"})," and ",(0,s.jsx)(t.code,{children:"points"})," fields:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "type": "object",\n  "properties": {\n    "items": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "properties": {\n          "name": {\n            "type": "string"\n          },\n          "points": {\n            "type": "number"\n          }\n        },\n        "required": ["name", "points"],\n        "additionalProperties": false\n      }\n    }\n  },\n  "required": ["items"],\n  "additionalProperties": false\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"JSON property declaration",src:n(17867).A+"",width:"964",height:"868"})}),"\n",(0,s.jsx)(t.p,{children:"To edit the JSON data, the editor shows a dedicated dialog with syntax highlighting, validation and auto-completion:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"JSON editor",src:n(78024).A+"",width:"1328",height:"896"})}),"\n",(0,s.jsx)(t.p,{children:"The scene compiler generates the JSON values as JSON objects:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'myPrefab.myData = {\n    "items": [\n        {\n            "name": "coin",\n            "points": 10\n        },\n        {\n            "name": "apple",\n            "points": 5\n        }\n    ]\n'})}),"\n",(0,s.jsx)(t.h2,{id:"array-properties-types",children:"Array properties types"}),"\n",(0,s.jsx)(t.p,{children:"New in Phaser Editor 5 we added the support for user properties of type Array. This allows you to create properties that can hold multiple values, like a list of items or a collection of objects. This mean you can declare any previous user property type as an Array."}),"\n",(0,s.jsxs)(t.p,{children:["To declare a property as an Array, you can set the ",(0,s.jsx)(t.strong,{children:"Is Array Type"})," flag:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Declare array user property",src:n(52155).A+"",width:"728",height:"592"})}),"\n",(0,s.jsxs)(t.p,{children:["When you select this option, the ",(0,s.jsx)(t.strong,{children:"Type"})," parameter becomes the ",(0,s.jsx)(t.strong,{children:"Item Type"})," parameter, and refers to the type of the Array items. The ",(0,s.jsx)(t.strong,{children:"Default"})," parameter becomes the ",(0,s.jsx)(t.strong,{children:"Default Item"})," parameter, and refers to the default value of the Array items."]}),"\n",(0,s.jsxs)(t.p,{children:["In addition, you can set the default items of the array. The ",(0,s.jsx)(t.strong,{children:"Default Array"})," parameter displays the list of default array items. You can add, remove or edit the array elements:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Array user property default items",src:n(45916).A+"",width:"1062",height:"770"})}),"\n",(0,s.jsx)(t.p,{children:"Very similar is the UI for setting array values in prefab and user component instances:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Array user property in a prefab instance",src:n(93875).A+"",width:"730",height:"410"})}),"\n",(0,s.jsx)(t.h2,{id:"initializing-other-properties",children:"Initializing other properties"}),"\n",(0,s.jsxs)(t.p,{children:["It\u2019s possible you want to change other properties of the prefab instance, in dependence of the values of the user properties. For example, if the ",(0,s.jsx)(t.strong,{children:"flameType"})," property value is ",(0,s.jsx)(t.code,{children:'"fire"'}),", then you set the mass of the body to ",(0,s.jsx)(t.code,{children:"50"}),". Because the property values are not set in the constructor, you can listen to the ",(0,s.jsx)(t.code,{children:"scene-awake"})," event and setup the body properties:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(scene,...) {\n        ...\n\n        /* START-USER-CTR-CODE */\n\n        scene.events.once("scene-awake", this.awake, this);\n\n        /* END-USER-CTR-CODE */\n    }\n\n    /** @type {"fire"|"smoke"|"laser"} */\n    flameType = "fire";\n\n    /* START-USER-CODE */\n\n    awake() {\n\n        // at this point, all objects in the scene are created\n        // and the user properties are set with new values\n\n        if (this.flameType === "fire") {\n            this.body.mass = 50;\n        }\n    }\n\n    /* END-USER-CODE */\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["If you enable the ",(0,s.jsx)(t.strong,{children:"Generate Awake Handler"})," flag in the ",(0,s.jsx)(t.strong,{children:"Compiler Prefab Settings"}),", the scene compiler will generate this code for you:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-prefab-settings-08212021.webp",alt:"Generate awake event handler."})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Level extends Phaser.GameObjects.Image {\n\n    constructor(scene,...) {\n\n        // awake handler\n        this.scene.events.once("scene-awake", () => this.awake());\n\n        ...\n    }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["It is your responsibility to write the ",(0,s.jsx)(t.code,{children:"awake"})," method."]}),"\n",(0,s.jsxs)(t.h3,{id:"the-scene-awake-event",children:["The ",(0,s.jsx)(t.code,{children:"scene-awake"})," event"]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"scene-awake"})," event is not part of the Phaser API. It\u2019s a custom event the Scene Editor uses as convention. When the scene compiler generates the code of a scene, it also generates the code for emitting the ",(0,s.jsx)(t.code,{children:"scene-awake"})," event. This event is emitted just after all objects are created:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Level extends Phaser.Scene {\n...\n    editorCreate() {\n        ...\n\n        // dragon\n        const dragon = new Dragon(this, 370, 218);\n        this.add.existing(dragon);\n\n        ...\n\n        // dragon (prefab fields)\n        dragon.maxSpeed = 300;\n        dragon.flameType = "smoke";\n        dragon.onClickHandler = obj => this.selectDragon(obj);\n        ...\n\n        this.events.emit("scene-awake");\n    }\n...\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["As we mentioned in the previous sections, prefabs and ",(0,s.jsx)(t.a,{href:"../user-components",children:"user components"})," can listen to this event for reading the values set to the user properties."]}),"\n",(0,s.jsxs)(t.p,{children:["It is important that you keep in mind that if you create a dynamic prefab instance, and it requires the ",(0,s.jsx)(t.code,{children:"scene-awake"})," event, then you should call it manually:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'spawnDino(scene, x, y, flame) {\n\n    const dragon = new Dragon(scene, x, y);\n    dragon.flameType = flame;\n    // send the awake notification to the new object\n    scene.events.emit("scene-awake");\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Because the ",(0,s.jsx)(t.code,{children:"scene-awake"})," event is listened once in prefabs and ",(0,s.jsx)(t.a,{href:"../user-components",children:"user components"}),", only the new objects will be notified."]}),"\n",(0,s.jsxs)(t.p,{children:["As alternative to the ",(0,s.jsx)(t.code,{children:"scene-awake"})," event, you can listen the ",(0,s.jsx)(t.code,{children:"Phaser.Scenes.Events.UPDATE"})," event. It is emitted by the scene at every tick, so you just need to register the listener to be called ",(0,s.jsx)(t.strong,{children:"once"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'scene.events.once("Phaser.Scenes.Events.UPDATE", this.start, this);\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Note that if you need to \u201Cawake\u201D prefab before the game starts updating, you should listen to the ",(0,s.jsx)(t.code,{children:"scene-awake"})," event."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"scene-awake"})," event is also used by components, ",(0,s.jsx)(t.a,{href:"../user-components/user-components-awake-event",children:"learn more about it"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"using-properties-with-custom-definition",children:"Using properties with custom definition"}),"\n",(0,s.jsxs)(t.p,{children:["You can set a user property with a ",(0,s.jsx)(t.strong,{children:"Custom Definition"}),":"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-properties-initializing-custom-prop-07092021.webp",alt:"Set custom definition flag."})}),"\n",(0,s.jsxs)(t.p,{children:["This means, the scene compiler skips the definition of the property. For example, if you set the ",(0,s.jsx)(t.code,{children:"flameType"})," as ",(0,s.jsx)(t.strong,{children:"Custom Definition"}),", the ",(0,s.jsx)(t.code,{children:"flameType"})," property declaration isn\u2019t generated. Instead, a ",(0,s.jsx)(t.code,{children:"flameType"})," property initialization is included in the constructor:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(scene,...) {\n        ...\n\n        // the compiler adds this\n        this.flameType = "fire";\n    }\n\n    // the compiler skips this:\n    // flameType = "fire";\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"Then, you can write a custom setter and initialize other fields of the prefab:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Dragon extends Phaser.GameObjects.Sprite {\n\n    constructor(scene,...) {\n        ...\n        this.flameType = "fire";\n    }\n\n    /* START-USER-CODE */\n\n    set flameType(flameType) {\n\n        // update the body with the flameType\n\n        if (flameType === "fire") {\n            this.body.mass = 50;\n        }\n    }\n\n    /* END-USER-CODE */\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Note that you don\u2019t need to listen for the ",(0,s.jsx)(t.code,{children:"prefab-awake"})," event anymore. Setting the ",(0,s.jsx)(t.code,{children:"flameType"})," property will update the prefab state in the expected way. It\u2019s possible you also need to define a getter for the ",(0,s.jsx)(t.code,{children:"flameType"}),". If that\u2019s the case, you can store its value in a new field, or compute it."]}),"\n",(0,s.jsx)(t.h2,{id:"user-properties-in-a-prefab-instance",children:"User properties in a prefab instance"}),"\n",(0,s.jsxs)(t.p,{children:["This is how the properties you defined in a Prefab are presented in the ",(0,s.jsx)(t.strong,{children:"Prefab Instance"})," section of a Prefab instance:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-prefab-instance-20230627.webp",alt:"User properties in a prefab instance."})}),"\n",(0,s.jsx)(t.p,{children:"The Inspector view shows a section for every Prefab (and prefab variant) of the object. The user properties are shown just like any other property of a Prefab instance."}),"\n",(0,s.jsx)(t.p,{children:"Each section contains a menu with the options:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Open Prefab"}),": opens the prefab file."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Select All Prefab"}),": select all objects in the scene instancing the same prefab."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/prefab-user-props-prefab-instance-menu-20230627.webp",alt:"Prefab instance section and menu."})}),"\n",(0,s.jsxs)(t.p,{children:["The code, generated by the scene compiler, that creates the Prefab instance and initialize the properties will look like following. Note the ",(0,s.jsx)(t.strong,{children:"dragon"})," instance is created first, and the user properties are initialized later, at the end of the method. By setting the user properties at the end, it allows you to set references to another objects created in the scene:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'class Level extends Phaser.Scene {\n...\n    create() {\n        ...\n\n        // dragon\n        const dragon = new Dragon(this, 370, 218);\n        this.add.existing(dragon);\n\n        ...\n\n        // dragon (prefab fields)\n        dragon.maxSpeed = 300;\n        dragon.flameType = "smoke";\n        dragon.onClickHandler = obj => this.selectDragon();\n        dragon.emit("prefab-awake");\n        ...\n    }\n...\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"In the next sections are covered the topics to create Prefab instances and to change the properties."})]})}function h(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},52546:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/prefab-user-props-common-params-20251122-b6e83a7e6b34fb60dfb85e09552e3055.webp"},95163:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/scene-editor-object-reference-property-filter-object-type-20251121-abd9b496b0a91df01f82290814b6568c.webp"},49154:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/scene-editor-object-reference-property-filter-tags-20251121-0a7f64e72412d96cb92a3f062d9317d0.webp"},93875:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/scene-editor-user-proeprty-array-prefab-instance-20250604-99cd16131ac95946892844cb0c4930a5.webp"},45916:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/scene-editor-user-property-array-20250604-1869dbdf08d5a6e3888f3e90909a814c.webp"},52155:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/scene-editor-user-property-array-flag-20250604-97e544b44dd0c5033e43fc949aa5ea8f.webp"},78024:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/user-property-json-edit-20251121-474c3700308add56583795c29801ee9e.webp"},17867:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/user-property-json-property-20251121-053673e602e438d330cce0cbf5325805.webp"},46338:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/user-property-spine-slot-name-20251121-8f987433c804258ad1934358c326abac.webp"},16004:function(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/user-property-spine-slot-name-dialog-20251121-1be0d830c9a9c92d3f42764f0bbc6ebf.webp"},28453:function(e,t,n){n.d(t,{R:()=>a,x:()=>o});var r=n(96540);let s={},i=r.createContext(s);function a(e){let t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);