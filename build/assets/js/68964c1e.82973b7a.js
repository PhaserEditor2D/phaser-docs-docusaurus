"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["30490"],{52438:function(e,n,t){t.r(n),t.d(n,{metadata:()=>a,default:()=>h,frontMatter:()=>i,contentTitle:()=>o,toc:()=>c,assets:()=>l});var a=JSON.parse('{"id":"phaser-editor/scene-editor/prefabs/prefab-instance-children","title":"Adding children to a prefab instance","description":"Since v3.35.0 of Phaser Editor you can add children to a prefab instance. Sure, it should be an instance of a Layer or Container prefab.","source":"@site/docs/phaser-editor/scene-editor/prefabs/prefab-instance-children.md","sourceDirName":"phaser-editor/scene-editor/prefabs","slug":"/phaser-editor/scene-editor/prefabs/prefab-instance-children","permalink":"/phaser-editor/scene-editor/prefabs/prefab-instance-children","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"prefab-instance-children","title":"Adding children to a prefab instance"},"sidebar":"PhaserEditorSidebar","previous":{"title":"Nested prefabs","permalink":"/phaser-editor/scene-editor/prefabs/prefab-nested"},"next":{"title":"Prefab tags","permalink":"/phaser-editor/scene-editor/prefabs/prefab-tags"}}'),r=t(74848),s=t(28453);let i={slug:"prefab-instance-children",title:"Adding children to a prefab instance"},o,l={},c=[];function d(e){let n={a:"a",code:"code",em:"em",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Since v3.35.0 of Phaser Editor you can add children to a prefab instance. Sure, it should be an instance of a Layer or Container prefab."}),"\n",(0,r.jsxs)(n.p,{children:["For backward compatibility, this behavior is disabled by default in prefabs. You should enable it in the ",(0,r.jsx)(n.a,{href:"../game-objects/common-object-properties#children-properties",children:"Children properties section"}),", setting on the ",(0,r.jsx)(n.strong,{children:"Allow Append Children"})," parameter. It means you have to checkmark that parameter in a Container or Layer prefab or nested prefab."]}),"\n",(0,r.jsx)(n.p,{children:"This is a handy feature for creating reusable objects. Let\u2019s see the next example."}),"\n",(0,r.jsxs)(n.p,{children:["We want to create a reusable dialog object that we can use for showing ",(0,r.jsx)(n.em,{children:"Level Complete"})," dialog or a ",(0,r.jsx)(n.em,{children:"Game Paused"})," dialog."]}),"\n",(0,r.jsxs)(n.p,{children:["We create a ",(0,r.jsx)(n.strong,{children:"DialogPrefab"})," with a basic structure: a ",(0,r.jsx)(n.strong,{children:"background"})," image and a close button. In addition to the structure, it also has a basic behavior: it animates from the bottom of the screen and if you click the ",(0,r.jsx)(n.strong,{children:"close"})," button it closes the dialog:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/prefab-children-basic-dialog-20221004.webp",alt:"Basic dialog"})}),"\n",(0,r.jsx)(n.p,{children:"Some considerations:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For allowing adding new children to the prefab instances, we should check the ",(0,r.jsx)(n.strong,{children:"Allow Append Children"})," parameter we mentioned before."]}),"\n",(0,r.jsxs)(n.li,{children:["Maybe we want to change the texture of the ",(0,r.jsx)(n.strong,{children:"close"})," button in prefab instances, so we make it a nested prefab."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Now let\u2019s create the ",(0,r.jsx)(n.strong,{children:"LevelCompleteDialogPrefab"}),". It is a new prefab that is a variant of the ",(0,r.jsx)(n.strong,{children:"DialogPrefab"}),". It means, the ",(0,r.jsx)(n.code,{children:"LevelCompleteDialogPrefab"})," class extends the ",(0,r.jsx)(n.code,{children:"DialogPrefab"})," class. In this new dialog, we add the ",(0,r.jsx)(n.strong,{children:"Level Complete"})," message and three reward stars and change the texture of the ",(0,r.jsx)(n.strong,{children:"close"})," button (to green)."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/prefab-children-level-complete-dialog-20221004.webp",alt:"The Level Complete dialog prefab"})}),"\n",(0,r.jsxs)(n.p,{children:["Notice the new ",(0,r.jsx)(n.strong,{children:"levelCompleteRibbon"}),", and the ",(0,r.jsx)(n.strong,{children:"star1"}),", ",(0,r.jsx)(n.strong,{children:"star2"}),", and ",(0,r.jsx)(n.strong,{children:"star3"})," objects, are children of an instance of the ",(0,r.jsx)(n.strong,{children:"DialogPrefab"})," prefab. In previous versions of the editor, for getting a similar structure, you had to wrap a ",(0,r.jsx)(n.strong,{children:"DialogPrefab"})," with a new container and add the new objects to it. But now, you can add new children to the same prefab instance and at the same time, it inherits the behaviors of the ",(0,r.jsx)(n.strong,{children:"DialogPrefab"}),". It doesn\u2019t require any manual delegation of behaviors."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/prefab-children-level-complete-dialog-outline-20221004.webp",alt:"Structure of the Complete Level prefab."})}),"\n",(0,r.jsxs)(n.p,{children:["As result, we get the following code of the ",(0,r.jsx)(n.code,{children:"LevelCompletePrefab"})," class:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'class LevelCompleteDialogPrefab extends DialogPrefab {\n\nconstructor(scene: Phaser.Scene, x?: number, y?: number) {\nsuper(scene, x ?? 400, y ?? 303);\n\nthis.closeButton.setTexture("Button Pack - Green_Button Green - Close");\n\n// levelCompleteRibbon\nconst levelCompleteRibbon = scene.add.image(0, -30, "Casual Game GUI_Attribute - Ribbon Green");\nlevelCompleteRibbon.scaleX = 0.5;\nlevelCompleteRibbon.scaleY = 0.5;\nthis.add(levelCompleteRibbon);\n\n// star1\nconst star1 = scene.add.image(-89, 81, "Casual Game GUI_Icon - Star Yellow");\nstar1.scaleX = 0.5;\nstar1.scaleY = 0.5;\nstar1.angle = -10;\nthis.add(star1);\n\n// star2\nconst star2 = scene.add.image(-2, 71, "Casual Game GUI_Icon - Star Yellow");\nstar2.scaleX = 0.5;\nstar2.scaleY = 0.5;\nthis.add(star2);\n\n// star3\nconst star3 = scene.add.image(85, 81, "Casual Game GUI_Icon - Star Yellow");\nstar3.scaleX = 0.5;\nstar3.scaleY = 0.5;\nstar3.angle = 10;\nthis.add(star3);\n}\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Following the same pattern then we can create a ",(0,r.jsx)(n.strong,{children:"PauseDialogPrefab"}),":"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://cdn.phaser.io/editor-docs/prefab-children-game-pause-dialog-20221004.webp",alt:"Game paused prefab"})})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:function(e,n,t){t.d(n,{R:()=>i,x:()=>o});var a=t(96540);let r={},s=a.createContext(r);function i(e){let n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);