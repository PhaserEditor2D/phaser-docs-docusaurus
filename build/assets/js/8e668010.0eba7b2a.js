"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["98514"],{58727:function(e,t,n){n.r(t),n.d(t,{metadata:()=>s,default:()=>p,frontMatter:()=>a,contentTitle:()=>i,toc:()=>d,assets:()=>c});var s=JSON.parse('{"id":"phaser-editor/scene-editor/user-components/user-components-start-update-methods","title":"Implementing behaviors with the Phaser events","description":"Many user components you will create will implement certain behavior of an object. This behavior should be initialized and later updated at every step of the game loop.","source":"@site/docs/phaser-editor/scene-editor/user-components/user-components-start-update-methods.md","sourceDirName":"phaser-editor/scene-editor/user-components","slug":"/phaser-editor/scene-editor/user-components/user-components-start-update-methods","permalink":"/phaser-editor/scene-editor/user-components/user-components-start-update-methods","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"user-components-start-update-methods","title":"Implementing behaviors with the Phaser events"},"sidebar":"PhaserEditorSidebar","previous":{"title":"The User Components compiler","permalink":"/phaser-editor/scene-editor/user-components/user-components-compiler"},"next":{"title":"A base class for your components","permalink":"/phaser-editor/scene-editor/user-components/user-components-super-class"}}'),o=n(74848),r=n(28453);let a={slug:"user-components-start-update-methods",title:"Implementing behaviors with the Phaser events"},i,c={},d=[];function h(e){let t={a:"a",code:"code",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Many user components you will create will implement certain behavior of an object. This behavior should be initialized and later updated at every step of the game loop."}),"\n",(0,o.jsxs)(t.p,{children:["Game engines like ",(0,o.jsx)(t.a,{href:"https://unity.com",children:"Unity"}),", that support a similar design pattern, ",(0,o.jsx)(t.a,{href:"https://docs.unity3d.com/Manual/CreatingAndUsingScripts",children:"use a Start and Update methods"})," to implement the behavior of the component."]}),"\n",(0,o.jsxs)(t.p,{children:["The Phaser framework does not provide a similar approach, components are not part of the Phaser API. However, Phaser provides a lot of events that you can handle and implement the gameplay. For example, you can simulate the Unity scripting using the user components and the Phaser events. You can create an ",(0,o.jsx)(t.strong,{children:"EventComponent"})," class that handles the events:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"class EventComponent {\n\n    /**\n    * @param {Phaser.GameObjects.GameObject} gameObject\n    */\n    constructor(gameObject) {\n\n        this.scene = gameObject.scene;\n\n        // first time the scene is updated, call the `start` method\n        this.scene.events.once(Phaser.Scenes.Events.UPDATE, this.start, this);\n        // each time the scene is updated, call the `update` method\n        this.scene.events.on(Phaser.Scenes.Events.UPDATE, this.update, this);\n        // if the object is destroyed, call the `destroy` method\n        gameObject.on(Phaser.GameObjects.Events.DESTROY, this.destroy, this);\n    }\n\n    start() {\n        // to be overridden in derived classes\n    }\n\n    update() {\n        // to be overridden in derived classes\n    }\n\n    destroy() {\n        // the object is destroyed, so we remove all the event handlers\n        this.scene.events.off(Phaser.Scenes.Events.UPDATE, this.start, this);\n        this.scene.events.off(Phaser.Scenes.Events.UPDATE, this.update, this);\n    }\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Then, you can set the ",(0,o.jsx)(t.strong,{children:"EventComponent"})," class as super class to all your components:"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://cdn.phaser.io/editor-docs/scene-editor-user-components-super-class-07302020.webp",alt:"Setting a super class to components."})}),"\n",(0,o.jsxs)(t.p,{children:["Now, you can override the ",(0,o.jsx)(t.strong,{children:"start"}),", ",(0,o.jsx)(t.strong,{children:"update"}),", and ",(0,o.jsx)(t.strong,{children:"destroy"})," methods in the component classes."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"class HorizontalMove extends EventComponent {\n\n    ...\n\n    update() {\n\n        this.gameObject.x += this.deltaX;\n    }\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"EventComponent"})," class is just an example of what you can do. It has a weak point: not all components need to listen to all the events. It is a waste of resources adding scene listeners in all the cases."]}),"\n",(0,o.jsx)(t.p,{children:"Since v3.13.0, the editor can \u201Cwrite\u201D for you a base class that could be a better solution. However,  you can change its code and adapt it to your specific domain. Check the next section for more details."})]})}function p(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453:function(e,t,n){n.d(t,{R:()=>a,x:()=>i});var s=n(96540);let o={},r=s.createContext(o);function a(e){let t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);